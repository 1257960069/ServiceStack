var __awaiter=this&&this.__awaiter||function(e,a,u,s){return new(u||(u=Promise))(function(t,n){function r(e){try{o(s.next(e))}catch(e){n(e)}}function i(e){try{o(s.throw(e))}catch(e){n(e)}}function o(e){e.done?t(e.value):function(t){return t instanceof u?t:new u(function(e){e(t)})}(e.value).then(r,i)}o((s=s.apply(e,a||[])).next())})},__generator=this&&this.__generator||function(n,r){var i,o,a,e,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,o=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=r.call(n,u)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd?define(["require","exports"],e):"undefined"!=typeof window&&e(window.require||function(){},window["@servicestack/desktop"]={})}(function(e,t){"use strict";function n(e,o){return __awaiter(this,void 0,void 0,function(){var t,n,r,i;return __generator(this,function(e){switch(e.label){case 0:for(n in t=new FormData,o)o.hasOwnProperty(n)&&t.append(n,o[n]);e.label=1;case 1:return e.trys.push([1,4,,5]),[4,fetch("https://host/script",{method:"POST",body:t})];case 2:return[4,(r=e.sent()).text()];case 3:if(i=e.sent(),r.ok)return[2,0<i.length?JSON.parse(i):null];throw i;case 4:throw e.sent();case 5:return[2]}})})}function r(e,r){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(e){switch(e.label){case 0:for(n in t=new FormData,r)r.hasOwnProperty(n)&&t.append(n,r[n]);e.label=1;case 1:return e.trys.push([1,4,,5]),[4,fetch("https://host/script",{method:"POST",body:t})];case 2:return[4,e.sent().text()];case 3:return[2,e.sent()];case 4:throw e.sent();case 5:return[2]}})})}function i(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n(0,{EvaluateCode:t})];case 1:return[2,e.sent()]}})})}function o(e){return'"'+e.replace('"','\\"')+'"'}function a(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i(t)];case 1:return[2,e.sent()]}})})}var u,s,c,l,d;Object.defineProperty(t,"__esModule",{value:!0}),t.invokeHostJsonMethod=n,t.invokeHostTextMethod=r,t.evaluateScript=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n(0,{EvaluateScript:t})];case 1:return[2,e.sent()]}})})},t.evaluateCode=i,t.evaluateLisp=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n(0,{EvaluateLisp:t})];case 1:return[2,e.sent()]}})})},t.renderScript=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,r(0,{RenderScript:t})];case 1:return[2,e.sent()]}})})},t.renderCode=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,r(0,{RenderCode:t})];case 1:return[2,e.sent()]}})})},t.renderLisp=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,r(0,{RenderLisp:t})];case 1:return[2,e.sent()]}})})},t.evaluateScriptAsync=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n(0,{EvaluateScriptAsync:t})];case 1:return[2,e.sent()]}})})},t.evaluateCodeAsync=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n(0,{EvaluateCodeAsync:t})];case 1:return[2,e.sent()]}})})},t.evaluateLispAsync=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n(0,{EvaluateLispAsync:t})];case 1:return[2,e.sent()]}})})},t.renderScriptAsync=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,r(0,{RenderScriptAsync:t})];case 1:return[2,e.sent()]}})})},t.renderCodeAsync=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,r(0,{RenderCodeAsync:t})];case 1:return[2,e.sent()]}})})},t.renderLispAsync=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,r(0,{RenderLispAsync:t})];case 1:return[2,e.sent()]}})})},t.evalToBool=a,t.desktopInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("desktopInfo")];case 1:return[2,e.sent()]}})})},t.openUrl=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,a("openUrl("+o(t)+")")];case 1:return[2,e.sent()]}})})},t.open=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,a("open("+o(t)+")")];case 1:return[2,e.sent()]}})})},t.expandEnvVars=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("expandEnvVars("+o(t)+")")];case 1:return[2,e.sent()]}})})},t.clipboard=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("clipboard")];case 1:return[2,e.sent()]}})})},t.setClipboard=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("setClipboard("+o(t)+")")];case 1:return[2,e.sent()]}})})},t.deviceScreenResolution=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("deviceScreenResolution")];case 1:return[2,e.sent()]}})})},t.windowSendToForeground=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,a("windowSendToForeground")];case 1:return[2,e.sent()]}})})},t.windowCenterToScreen=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,a(t?"windowCenterToScreen("+t+")":"windowCenterToScreen")];case 1:return[2,e.sent()]}})})},t.windowSetFullScreen=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,a("windowSetFullScreen")];case 1:return[2,e.sent()]}})})},t.windowSetFocus=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,a("windowSetFocus")];case 1:return[2,e.sent()]}})})},t.windowShowScrollBar=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,a("windowCenterToScreen("+t+")")];case 1:return[2,e.sent()]}})})},t.windowSetPosition=function(t,n,r,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,a(r?"windowSetPosition("+t+","+n+","+r+","+i+")":"windowSetPosition("+t+","+n+")")];case 1:return[2,e.sent()]}})})},t.windowSetSize=function(t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,a("windowSetSize("+t+","+n+")")];case 1:return[2,e.sent()]}})})},t.windowRedrawFrame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,a("windowRedrawFrame")];case 1:return[2,e.sent()]}})})},t.windowIsVisible=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,a("windowIsVisible")];case 1:return[2,e.sent()]}})})},t.windowIsEnabled=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,a("windowIsEnabled")];case 1:return[2,e.sent()]}})})},t.windowShow=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,a("windowShow")];case 1:return[2,e.sent()]}})})},t.windowHide=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,a("windowHide")];case 1:return[2,e.sent()]}})})},t.windowText=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("windowText")];case 1:return[2,e.sent()]}})})},t.windowSetText=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,a("windowSetText("+o(t)+")")];case 1:return[2,e.sent()]}})})},t.windowSize=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("windowSize")];case 1:return[2,e.sent()]}})})},t.windowClientSize=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("windowClientSize")];case 1:return[2,e.sent()]}})})},t.windowClientRect=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("windowClientRect")];case 1:return[2,e.sent()]}})})},t.windowSetState=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,a("windowSetState("+t+")")];case 1:return[2,e.sent()]}})})},(u=t.ShowWindowCommands||(t.ShowWindowCommands={}))[u.Hide=0]="Hide",u[u.Normal=1]="Normal",u[u.ShowMinimized=2]="ShowMinimized",u[u.Maximize=3]="Maximize",u[u.ShowMaximized=3]="ShowMaximized",u[u.ShowNoActivate=4]="ShowNoActivate",u[u.Show=5]="Show",u[u.Minimize=6]="Minimize",u[u.ShowMinNoActive=7]="ShowMinNoActive",u[u.ShowNA=8]="ShowNA",u[u.Restore=9]="Restore",u[u.ShowDefault=10]="ShowDefault",u[u.ForceMinimize=11]="ForceMinimize",(s=t.OpenFolderFlags||(t.OpenFolderFlags={}))[s.AllowMultiSelect=512]="AllowMultiSelect",s[s.CreatePrompt=8192]="CreatePrompt",s[s.DontAddToRecent=33554432]="DontAddToRecent",s[s.EnableHook=32]="EnableHook",s[s.EnableIncludeNotify=4194304]="EnableIncludeNotify",s[s.EnableSizing=8388608]="EnableSizing",s[s.EnableTemplate=64]="EnableTemplate",s[s.EnableTemplateHandle=128]="EnableTemplateHandle",s[s.Explorer=524288]="Explorer",s[s.ExtensionIsDifferent=1024]="ExtensionIsDifferent",s[s.FileMustExist=4096]="FileMustExist",s[s.ForceShowHidden=268435456]="ForceShowHidden",s[s.HideReadOnly=4]="HideReadOnly",s[s.LongNames=2097152]="LongNames",s[s.NoChangeDir=8]="NoChangeDir",s[s.NoDereferenceLinks=1048576]="NoDereferenceLinks",s[s.NoLongNames=262144]="NoLongNames",s[s.NoNetworkButton=131072]="NoNetworkButton",s[s.NoReadOnlyReturn=32768]="NoReadOnlyReturn",s[s.NoTestFileCreate=65536]="NoTestFileCreate",s[s.NoValidate=256]="NoValidate",s[s.OverwritePrompt=2]="OverwritePrompt",s[s.PathMustExist=2048]="PathMustExist",s[s.ReadOnly=1]="ReadOnly",s[s.ShareAware=16384]="ShareAware",s[s.ShowHelp=16]="ShowHelp",t.openFile=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("openFile("+JSON.stringify(t)+")")];case 1:return[2,e.sent()]}})})},(l=c=t.MessageBoxType||(t.MessageBoxType={}))[l.AbortRetryIgnore=2]="AbortRetryIgnore",l[l.CancelTryContinue=6]="CancelTryContinue",l[l.Help=16384]="Help",l[l.Ok=0]="Ok",l[l.OkCancel=1]="OkCancel",l[l.RetryCancel=5]="RetryCancel",l[l.YesNo=4]="YesNo",l[l.YesNoCancel=3]="YesNoCancel",l[l.IconExclamation=48]="IconExclamation",l[l.IconWarning=48]="IconWarning",l[l.IconInformation=64]="IconInformation",l[l.IconQuestion=32]="IconQuestion",l[l.IconStop=16]="IconStop",l[l.DefaultButton1=0]="DefaultButton1",l[l.DefaultButton2=256]="DefaultButton2",l[l.DefaultButton3=512]="DefaultButton3",l[l.DefaultButton4=768]="DefaultButton4",l[l.AppModal=0]="AppModal",l[l.SystemModal=4096]="SystemModal",l[l.TaskModal=8192]="TaskModal",l[l.DefaultDesktopOnly=131072]="DefaultDesktopOnly",l[l.RightJustified=524288]="RightJustified",l[l.RightToLeftReading=1048576]="RightToLeftReading",l[l.SetForeground=65536]="SetForeground",l[l.TopMost=262144]="TopMost",l[l.ServiceNotification=2097152]="ServiceNotification",(d=t.MessageBoxReturn||(t.MessageBoxReturn={}))[d.Abort=3]="Abort",d[d.Cancel=2]="Cancel",d[d.Continue=11]="Continue",d[d.Ignore=5]="Ignore",d[d.No=7]="No",d[d.Ok=1]="Ok",d[d.Retry=4]="Retry",d[d.TryAgain=10]="TryAgain",d[d.Yes=6]="Yes",t.messageBox=function(t,n,r){return void 0===n&&(n=""),void 0===r&&(r=c.Ok),__awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("messageBox("+o(t)+","+o(n)+","+r+")")];case 1:return[2,e.sent()]}})})}});