<script>App.components({ Sidebar: '#sidebar-template' })</script>
<template id="sidebar-template">
<div class="sidebar border-r border-gray-200">
    <div class="z-10 sidebar-filter fixed h-filter pt-3">
        <div v-scope="Brand({ iconUri: ui.brandIconUri, serviceName })"></div>
        <div>
            <input type="search" placeholder="filter" v-model="store.filter"
                   class="text-lg w-full" style="margin:9px 0 0 0">
        </div>
    </div>
    <div class="sidebar-nav fixed overflow-y-auto">
        <nav class="flex-1 space-y-1 bg-white" aria-label="Sidebar">
            <div v-for="nav in store.filteredSideNav" class="space-y-1">
                <button v-if="nav.tag" type="button" @click.prevent="store.toggle(nav.tag)"
                        class="bg-white text-gray-600 hover:bg-gray-50 hover:text-gray-900 group w-full flex items-center pr-2 py-2 text-left text-sm font-medium">
                    <svg :class="[nav.expanded ? 'text-gray-400 rotate-90' : 'text-gray-300','mr-2 flex-shrink-0 h-5 w-5 transform group-hover:text-gray-400 transition-colors ease-in-out duration-150']" viewBox="0 0 20 20" aria-hidden="true">
                        <path d="M6 6L14 10L6 14V6Z" fill="currentColor" />
                    </svg>
                    {{nav.tag}}
                </button>
                <div v-if="nav.expanded" class="space-y-1">
                    <a v-for="op in nav.operations" v-href="{ op:op.request.name, preview:'' }" 
                       :class="[op.request.name == routes.op ? 'bg-indigo-50 border-indigo-600 text-indigo-600' : 
                        'border-transparent text-gray-600 hover:text-gray-900 hover:bg-gray-50', 'border-l-4 group w-full flex justify-between items-center pl-10 pr-2 py-2 text-sm font-medium']">
                        <span class="nav-item flex-grow">{{op.request.name}}</span>
                        <span v-if="op.requiresAuth" class="svg-lock w-5 h-5"></span>
                    </a>
                </div>
            </div>
        </nav>
    </div>
</div>
</template>