@inherits DynamicInputBase

@if (IsSelect)
{
    <SelectInput Id=@UseId Status=@Status TValue="string"
                @bind-Value="Value" @attributes="AllAttributes" Help=@TextUtils.Humanize(UseId)>
    @if (Input?.AllowableEntries != null)
    {
        foreach (var entry in Input!.AllowableEntries)
        {
            <option value=@entry.Key>@entry.Value</option>
        }
    }
    else if (Input?.AllowableValues != null)
    {
        foreach (var item in Input!.AllowableValues)
        {
            <option value=@item>@item</option>
        }
    }
    </SelectInput>
}
else if (IsCheckbox)
{
    <CheckboxInput Id=@UseId Status=@Status @bind-Value="Value" @attributes="AllAttributes" Help=@UseHelp />
}
else if (UseType == "file")
{
    string? value = null;
    ICollection<string>? values = null;
    UploadedFile? file = null;
    List<UploadedFile>? files = null;

    if (ValueObject != null)
    {
        value = ValueObject as string;
        if (value == null)
        {
            values = ValueObject as ICollection<string>;
            if (values == null)
            {
                if (ValueObject is System.Collections.IEnumerable)
                {
                    files = ValueObject.ConvertTo<List<UploadedFile>>();
                }
                else
                {
                    file = ValueObject.ConvertTo<UploadedFile>();
                }
            }
        }
    }

    <FileInput type=@UseType Id=@UseId Status=@Status @attributes="AllAttributes" Help=@UseHelp
        Multiple=@(Input?.Multiple ?? false) Accept=@(Input?.Accept)
        Value=@value Values=@values File=@file Files=@files
        OnInput="e => Model[Input!.Id] = e" />
}
else
{
    <TextInput type=@UseType Id=@UseId Status=@Status @bind-Value="Value" @attributes="AllAttributes" Help=@UseHelp />
}
